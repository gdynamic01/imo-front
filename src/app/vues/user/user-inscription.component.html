<div class="container">
  <div fxFlex="60" fxFlex.md="70" fxFlex.sm="80" fxFlex.xs="98" fxLayout="column">
    <div class="bloc-form">
      <div *ngIf="messageErreur" id="message-error">
        <div class="col s12 m12 l12 xl12">
          <app-alerte-message [messages]="message" [colors_msg]="colors"></app-alerte-message>
        </div>
      </div>
      <h2 class="title">Création compte</h2>
      <form [formGroup]="utilisateurForm">
        <div class="user" formGroupName="user">
          <div class="input-field">
            <label>Qui êtes-vous *</label>
            <mat-radio-group formControlName="typeUtilisateur" (change)="onSelect($event)">
              <mat-radio-button value="PARTICULIER">Particulier</mat-radio-button>
              <mat-radio-button value="ENTREPRISE">Entreprise</mat-radio-button>
            </mat-radio-group>
          </div>
          <div class="representantLegal" formGroupName="representantLegal">
            <div class="input-field">
              <mat-form-field>
                <input matInput formControlName="nom" placeholder="Nom *">
              </mat-form-field>
            </div>
            <div class="input-field">
              <mat-form-field>
                <input matInput formControlName="prenom" placeholder="Prenom *">
              </mat-form-field>
            </div>
            <div class="input-field">
              <mat-form-field>
                <mat-label>Votre genre *</mat-label>
                <mat-select formControlName="sexe">
                  <mat-option value="F">Feminin</mat-option>
                  <mat-option value="M">Masculin</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
          <div class="input-field">
            <mat-form-field>
              <input matInput formControlName="email" placeholder="Email *">
            </mat-form-field>
          </div>
          <div class="passwords" formGroupName="passwords">
            <div class="input-field">
              <mat-form-field>
                <mat-label>Mot de passe *</mat-label>
                <input matInput [type]="hide ? 'text' : 'password'" formControlName="password">
                <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                  <mat-icon>{{hide ? 'visibility' : 'visibility_off'}}</mat-icon>
                </button>
                <mat-error *ngIf="utilisateurForm.errors?.invalid">esssai</mat-error>
              </mat-form-field>
            </div>
            <div class="input-field">
              <mat-form-field>
                <input matInput type='password' formControlName="confirmPassword"  placeholder="Confirmation votre mot de passe *">
              </mat-form-field>
              <mat-error *ngIf="password.errors !== null && password.errors.invalid">
                <span>Les mots de passe ne sont pas identiques</span>
              </mat-error>
            </div>
          </div>
          <div class="adresse" formGroupName="adresse">
            <div class="input-field">
              <mat-form-field>
                <input matInput formControlName="numeroRue" placeholder="Numero voie">
              </mat-form-field>
            </div>
            <div class="input-field">
              <mat-form-field>
                <input matInput formControlName="libelleRue" placeholder="Nom voie">
              </mat-form-field>
            </div>
            <div class="input-field">
              <mat-form-field>
                <input matInput formControlName="codePostal" placeholder="Code postal">
              </mat-form-field>
            </div>
            <div class="input-field">
              <mat-form-field>
                <input matInput formControlName="ville" placeholder="Ville *">
              </mat-form-field>
            </div>
            <div class="input-field">
              <mat-form-field>
                <input matInput formControlName="pays" placeholder="Pays *">
              </mat-form-field>
            </div>
          </div>
        </div>
        <div *ngIf="isProfessionnel" class="userMoral" formGroupName="userMoral">
          <div class="input-field">
            <mat-form-field>
              <input matInput formControlName="siret" placeholder="Siret *">
            </mat-form-field>
          </div>
          <div class="input-field">
            <mat-form-field>
              <input matInput formControlName="raisonSocial" placeholder="RaisonSocial *">
            </mat-form-field>
          </div>
          <div class="input-field">
            <mat-form-field>
              <input matInput formControlName="kbis" placeholder="Kbis">
            </mat-form-field>
          </div>
        </div>
        <div class="btn-bloc">
          <button [ngClass]="{'form-valid' : utilisateurForm.valid, 'form-invalid' : !utilisateurForm.valid}" mat-raised-button 
                  type="submit" [disabled]="!utilisateurForm.valid" (click)="onSubmit()">Valider</button>
          <button type="button" mat-raised-button [routerLink]="['/accueil']">Annuler</button>
        </div>
      </form>
    </div>
  </div>
</div>